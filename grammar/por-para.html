<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#0a0a0f">
    <title>Por vs Para - Yespa√±ol</title>
    <link rel="stylesheet" href="../css/design-system.css">
    <style>
        :root {
            --bg-primary: #000000;
            --bg-glass: rgba(28, 28, 30, 0.72);
            --bg-glass-hover: rgba(255, 255, 255, 0.1);
            --border-glass: rgba(255, 255, 255, 0.08);
            --text-primary: #ffffff;
            --text-secondary: rgba(235, 235, 245, 0.6);
            --text-tertiary: rgba(235, 235, 245, 0.3);
            /* Grammar - Deep Indigo theme */
            --accent: #6366f1;
            --accent-light: #818cf8;
            --accent-dark: #4f46e5;
            --success: #30d158;
            --warning: #ffd60a;
            --danger: #ff453a;
            /* Distinct colors for Por vs Para */
            --por-color: #a855f7;
            --para-color: #2dd4bf;
            --card-radius: 20px;
            --safe-bottom: env(safe-area-inset-bottom, 0px);
        }

        * { box-sizing: border-box; margin: 0; padding: 0; -webkit-tap-highlight-color: transparent; }
        html, body { height: 100%; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            overflow-x: hidden;
        }

        .app-container {
            min-height: 100%;
            padding: 56px 20px calc(80px + var(--safe-bottom));
        }

        .back-btn {
            position: fixed; top: 16px; left: 16px; z-index: 100;
            background: var(--bg-glass); border: 1px solid var(--border-glass);
            border-radius: 12px; padding: 10px 16px; color: var(--text-primary);
            font-size: 0.85rem; text-decoration: none;
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
        }
        .back-btn:active { transform: scale(0.96); }

        .lesson-header { text-align: center; margin-bottom: 32px; }
        .lesson-icon { font-size: 3rem; margin-bottom: 12px; }
        .lesson-title { font-size: 1.8rem; font-weight: 700; margin-bottom: 8px; }
        .lesson-subtitle { color: var(--text-secondary); font-size: 0.95rem; }

        .progress-bar { height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-bottom: 32px; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, var(--por-color), var(--para-color)); border-radius: 2px; transition: width 0.5s ease; }

        .section { margin-bottom: 32px; }
        .section-title { font-size: 1.2rem; font-weight: 600; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
        .section-title .por { color: var(--por-color); }
        .section-title .para { color: var(--para-color); }

        .card {
            background: var(--bg-glass);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--border-glass);
            border-radius: var(--card-radius);
            padding: 20px; margin-bottom: 12px;
        }
        .card-por { border-left: 3px solid var(--por-color); }
        .card-para { border-left: 3px solid var(--para-color); }

        .compare-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .compare-card { padding: 16px; text-align: center; }
        .compare-card h3 { font-size: 1.3rem; margin-bottom: 8px; }
        .compare-card.por h3 { color: var(--por-color); }
        .compare-card.para h3 { color: var(--para-color); }
        .compare-card p { font-size: 0.8rem; color: var(--text-secondary); }

        .rule-box { display: flex; gap: 12px; align-items: flex-start; margin-bottom: 16px; }
        .rule-icon { font-size: 1.3rem; flex-shrink: 0; margin-top: 2px; }
        .rule-content h4 { font-size: 0.95rem; font-weight: 600; margin-bottom: 4px; }
        .rule-content p { font-size: 0.85rem; color: var(--text-secondary); }

        .example {
            background: rgba(255,255,255,0.03);
            border-radius: 12px; padding: 14px;
            margin: 12px 0; font-size: 0.95rem;
        }
        .example-spanish { margin-bottom: 4px; }
        .example-spanish .highlight-por { color: var(--por-color); font-weight: 600; }
        .example-spanish .highlight-para { color: var(--para-color); font-weight: 600; }
        .example-english { color: var(--text-secondary); font-size: 0.85rem; font-style: italic; }

        .mnemonic {
            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1) 0%, rgba(34, 211, 238, 0.1) 100%);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: var(--card-radius);
            padding: 24px; text-align: center; margin: 24px 0;
        }
        .mnemonic-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 12px; }
        .mnemonic-content { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.7; }
        .mnemonic-highlight { display: block; font-size: 1.4rem; font-weight: 700; margin: 12px 0; }
        .mnemonic-highlight .por { color: var(--por-color); }
        .mnemonic-highlight .para { color: var(--para-color); }

        .tip-box {
            background: rgba(255, 214, 10, 0.08);
            border-left: 3px solid var(--warning);
            border-radius: 0 12px 12px 0;
            padding: 16px; margin: 16px 0;
        }
        .tip-title { font-size: 0.85rem; font-weight: 600; color: var(--warning); margin-bottom: 6px; }
        .tip-text { font-size: 0.85rem; color: var(--text-secondary); }

        .quiz-card {
            background: linear-gradient(135deg, var(--bg-glass) 0%, rgba(168, 85, 247, 0.05) 100%);
            border: 1px solid var(--border-glass);
            border-radius: var(--card-radius);
            padding: 24px; margin: 24px 0;
        }
        .quiz-question { font-size: 1.1rem; margin-bottom: 8px; }
        .quiz-sentence { font-size: 1.3rem; font-weight: 500; margin-bottom: 20px; }
        .quiz-sentence .blank { background: rgba(255,255,255,0.1); padding: 4px 16px; border-radius: 8px; margin: 0 4px; }
        .quiz-options { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .quiz-btn {
            padding: 14px; border-radius: 12px;
            font-size: 1rem; font-weight: 600;
            border: 2px solid transparent; cursor: pointer;
            transition: all 0.2s ease;
        }
        .quiz-btn.por { background: rgba(168, 85, 247, 0.15); color: var(--por-color); border-color: rgba(168, 85, 247, 0.3); }
        .quiz-btn.para { background: rgba(34, 211, 238, 0.15); color: var(--para-color); border-color: rgba(34, 211, 238, 0.3); }
        .quiz-btn:active { transform: scale(0.96); }
        .quiz-btn.correct { background: var(--success); color: #000; border-color: var(--success); }
        .quiz-btn.incorrect { background: var(--danger); color: #fff; border-color: var(--danger); }
        .quiz-feedback { margin-top: 16px; padding: 14px; border-radius: 12px; display: none; }
        .quiz-feedback.show { display: block; }
        .quiz-feedback.correct { background: rgba(50, 215, 75, 0.15); color: var(--success); }
        .quiz-feedback.incorrect { background: rgba(255, 69, 58, 0.15); color: var(--danger); }

        .cta-section { text-align: center; padding: 32px 0; }
        .cta-btn {
            display: inline-flex; align-items: center; gap: 8px;
            padding: 16px 32px; background: var(--accent);
            color: #000; font-size: 1rem; font-weight: 600;
            border-radius: 14px; border: none; cursor: pointer;
        }
        .cta-btn:active { transform: scale(0.96); }

        .score-display {
            position: fixed; bottom: 20px; right: 20px;
            background: var(--bg-glass); backdrop-filter: blur(20px);
            border: 1px solid var(--border-glass);
            border-radius: 16px; padding: 12px 20px;
            display: flex; align-items: center; gap: 10px; z-index: 50;
        }
        .score-label { font-size: 0.75rem; color: var(--text-secondary); }
        .score-value { font-size: 1.2rem; font-weight: 700; color: var(--success); }

        .idiom-grid { display: grid; gap: 10px; margin-top: 16px; }
        .idiom-card { background: rgba(255,255,255,0.03); border-radius: 12px; padding: 14px; }
        .idiom-spanish { font-weight: 600; margin-bottom: 4px; }
        .idiom-literal { font-size: 0.8rem; color: var(--text-tertiary); margin-bottom: 4px; }
        .idiom-meaning { font-size: 0.85rem; color: var(--text-secondary); }
    </style>
</head>
<body>
    <a href="../index.html" class="back-btn">‚Üê Back</a>

    <div class="app-container">
        <header class="lesson-header">
            <div class="lesson-icon">üîÄ</div>
            <h1 class="lesson-title">Por vs Para</h1>
            <p class="lesson-subtitle">Two little words, endless confusion ‚Äî until now</p>
        </header>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
        </div>

        <!-- Intro -->
        <section class="section">
            <p style="color: var(--text-secondary); font-size: 0.95rem; margin-bottom: 20px;">
                Both "por" and "para" often translate to "for" in English, which is why they're so confusing. But they have distinct meanings that, once you understand them, become second nature.
            </p>

            <div class="compare-grid">
                <div class="card compare-card por">
                    <h3>POR</h3>
                    <p>Cause, reason, exchange, duration, movement through</p>
                </div>
                <div class="card compare-card para">
                    <h3>PARA</h3>
                    <p>Purpose, destination, recipient, deadline, goal</p>
                </div>
            </div>

            <div class="mnemonic">
                <div class="mnemonic-title">The Simple Rule</div>
                <div class="mnemonic-highlight">
                    <span class="por">POR</span> = Looking Back | <span class="para">PARA</span> = Looking Forward
                </div>
                <div class="mnemonic-content">
                    POR explains the cause or reason (why something happened).<br>
                    PARA points to the purpose or goal (what something is for).
                </div>
            </div>
        </section>

        <!-- POR Uses -->
        <section class="section">
            <h2 class="section-title"><span class="por">POR</span> ‚Äî The 7 Key Uses</h2>

            <div class="card card-por">
                <div class="rule-box">
                    <span class="rule-icon">üí°</span>
                    <div class="rule-content">
                        <h4>1. Cause / Reason (because of)</h4>
                        <p>Why something happened</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Llegu√© tarde <span class="highlight-por">por</span> el tr√°fico.</div>
                    <div class="example-english">I arrived late because of the traffic.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Gracias <span class="highlight-por">por</span> tu ayuda.</div>
                    <div class="example-english">Thanks for (because of) your help.</div>
                </div>
            </div>

            <div class="card card-por">
                <div class="rule-box">
                    <span class="rule-icon">üí∞</span>
                    <div class="rule-content">
                        <h4>2. Exchange / Substitution</h4>
                        <p>Trading one thing for another</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Pagu√© 50 euros <span class="highlight-por">por</span> el libro.</div>
                    <div class="example-english">I paid 50 euros for the book.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">¬øPuedes trabajar <span class="highlight-por">por</span> m√≠ ma√±ana?</div>
                    <div class="example-english">Can you work instead of me tomorrow?</div>
                </div>
            </div>

            <div class="card card-por">
                <div class="rule-box">
                    <span class="rule-icon">‚è±Ô∏è</span>
                    <div class="rule-content">
                        <h4>3. Duration of Time</h4>
                        <p>How long something lasts</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Estudi√© espa√±ol <span class="highlight-por">por</span> tres a√±os.</div>
                    <div class="example-english">I studied Spanish for three years.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Viv√≠ en M√©xico <span class="highlight-por">por</span> seis meses.</div>
                    <div class="example-english">I lived in Mexico for six months.</div>
                </div>
            </div>

            <div class="card card-por">
                <div class="rule-box">
                    <span class="rule-icon">üö∂</span>
                    <div class="rule-content">
                        <h4>4. Movement Through / Along</h4>
                        <p>Passing through a place</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Caminamos <span class="highlight-por">por</span> el parque.</div>
                    <div class="example-english">We walked through the park.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">El tren pasa <span class="highlight-por">por</span> Barcelona.</div>
                    <div class="example-english">The train passes through Barcelona.</div>
                </div>
            </div>

            <div class="card card-por">
                <div class="rule-box">
                    <span class="rule-icon">üìß</span>
                    <div class="rule-content">
                        <h4>5. Means / Method</h4>
                        <p>By what means something is done</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Te env√≠o el documento <span class="highlight-por">por</span> email.</div>
                    <div class="example-english">I'll send you the document by email.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Hablamos <span class="highlight-por">por</span> tel√©fono.</div>
                    <div class="example-english">We talked by phone.</div>
                </div>
            </div>

            <div class="card card-por">
                <div class="rule-box">
                    <span class="rule-icon">üåÖ</span>
                    <div class="rule-content">
                        <h4>6. General Time of Day</h4>
                        <p>Morning, afternoon, evening (non-specific)</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Trabajo <span class="highlight-por">por</span> la ma√±ana.</div>
                    <div class="example-english">I work in the morning.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Salimos <span class="highlight-por">por</span> la noche.</div>
                    <div class="example-english">We go out at night.</div>
                </div>
            </div>

            <div class="card card-por">
                <div class="rule-box">
                    <span class="rule-icon">‚úçÔ∏è</span>
                    <div class="rule-content">
                        <h4>7. By (passive voice agent)</h4>
                        <p>Who did the action</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">El libro fue escrito <span class="highlight-por">por</span> Garc√≠a M√°rquez.</div>
                    <div class="example-english">The book was written by Garc√≠a M√°rquez.</div>
                </div>
            </div>
        </section>

        <!-- PARA Uses -->
        <section class="section">
            <h2 class="section-title"><span class="para">PARA</span> ‚Äî The 6 Key Uses</h2>

            <div class="card card-para">
                <div class="rule-box">
                    <span class="rule-icon">üéØ</span>
                    <div class="rule-content">
                        <h4>1. Purpose / Goal (in order to)</h4>
                        <p>What something is for</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Estudio <span class="highlight-para">para</span> aprender.</div>
                    <div class="example-english">I study in order to learn.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Necesito dinero <span class="highlight-para">para</span> viajar.</div>
                    <div class="example-english">I need money to travel.</div>
                </div>
            </div>

            <div class="card card-para">
                <div class="rule-box">
                    <span class="rule-icon">üìç</span>
                    <div class="rule-content">
                        <h4>2. Destination (heading to)</h4>
                        <p>Where you're going</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Salgo <span class="highlight-para">para</span> Madrid ma√±ana.</div>
                    <div class="example-english">I leave for Madrid tomorrow.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Este autob√∫s va <span class="highlight-para">para</span> el centro.</div>
                    <div class="example-english">This bus goes to downtown.</div>
                </div>
                <div class="tip-box">
                    <div class="tip-title">POR vs PARA with Movement</div>
                    <div class="tip-text">POR = through/along a place. PARA = heading TO a destination.</div>
                </div>
            </div>

            <div class="card card-para">
                <div class="rule-box">
                    <span class="rule-icon">üéÅ</span>
                    <div class="rule-content">
                        <h4>3. Recipient</h4>
                        <p>Who something is for</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Este regalo es <span class="highlight-para">para</span> ti.</div>
                    <div class="example-english">This gift is for you.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Compr√© flores <span class="highlight-para">para</span> mi madre.</div>
                    <div class="example-english">I bought flowers for my mother.</div>
                </div>
            </div>

            <div class="card card-para">
                <div class="rule-box">
                    <span class="rule-icon">üìÖ</span>
                    <div class="rule-content">
                        <h4>4. Deadline</h4>
                        <p>By when something is due</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Necesito el informe <span class="highlight-para">para</span> el viernes.</div>
                    <div class="example-english">I need the report by Friday.</div>
                </div>
                <div class="example">
                    <div class="example-spanish">Tenemos que terminar <span class="highlight-para">para</span> las cinco.</div>
                    <div class="example-english">We have to finish by five o'clock.</div>
                </div>
            </div>

            <div class="card card-para">
                <div class="rule-box">
                    <span class="rule-icon">üíº</span>
                    <div class="rule-content">
                        <h4>5. Employment</h4>
                        <p>Who you work for</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish">Trabajo <span class="highlight-para">para</span> una empresa tecnol√≥gica.</div>
                    <div class="example-english">I work for a tech company.</div>
                </div>
            </div>

            <div class="card card-para">
                <div class="rule-box">
                    <span class="rule-icon">ü§î</span>
                    <div class="rule-content">
                        <h4>6. Opinion / Comparison</h4>
                        <p>In someone's view, compared to</p>
                    </div>
                </div>
                <div class="example">
                    <div class="example-spanish"><span class="highlight-para">Para</span> m√≠, es muy dif√≠cil.</div>
                    <div class="example-english">For me, it's very difficult.</div>
                </div>
                <div class="example">
                    <div class="example-spanish"><span class="highlight-para">Para</span> ser principiante, hablas muy bien.</div>
                    <div class="example-english">For a beginner, you speak very well.</div>
                </div>
            </div>
        </section>

        <!-- Common Expressions -->
        <section class="section">
            <h2 class="section-title">üó£Ô∏è Fixed Expressions</h2>
            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 16px;">
                Some expressions always use por or para ‚Äî memorize these:
            </p>

            <div class="card card-por">
                <h4 style="color: var(--por-color); margin-bottom: 12px;">Common POR Expressions</h4>
                <div class="idiom-grid">
                    <div class="idiom-card">
                        <div class="idiom-spanish">por favor</div>
                        <div class="idiom-meaning">please</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">por supuesto</div>
                        <div class="idiom-meaning">of course</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">por fin</div>
                        <div class="idiom-meaning">finally, at last</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">por lo menos</div>
                        <div class="idiom-meaning">at least</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">por eso</div>
                        <div class="idiom-meaning">that's why, for that reason</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">por cierto</div>
                        <div class="idiom-meaning">by the way</div>
                    </div>
                </div>
            </div>

            <div class="card card-para">
                <h4 style="color: var(--para-color); margin-bottom: 12px;">Common PARA Expressions</h4>
                <div class="idiom-grid">
                    <div class="idiom-card">
                        <div class="idiom-spanish">para siempre</div>
                        <div class="idiom-meaning">forever</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">para nada</div>
                        <div class="idiom-meaning">not at all</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">para colmo</div>
                        <div class="idiom-meaning">to top it all off</div>
                    </div>
                    <div class="idiom-card">
                        <div class="idiom-spanish">para variar</div>
                        <div class="idiom-meaning">for a change</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section class="section">
            <h2 class="section-title">üéØ Quick Practice</h2>
            <div id="quizContainer"></div>
        </section>

        <section class="cta-section">
            <button class="cta-btn" onclick="goToFlashcards()">
                Practice Flashcards ‚Üí
            </button>
        </section>
    </div>

    <div class="score-display">
        <span class="score-label">Score</span>
        <span class="score-value" id="scoreValue">0/0</span>
    </div>

    <script src="../js/core.js"></script>
    <script src="../js/ui.js"></script>
    <script>
        const quizQuestions = [
            { sentence: "Gracias ___ todo.", answer: "por", hint: "Cause/reason - thanking for something" },
            { sentence: "Este libro es ___ ti.", answer: "para", hint: "Recipient - it's for you" },
            { sentence: "Caminamos ___ la playa.", answer: "por", hint: "Movement through/along" },
            { sentence: "Salimos ___ Espa√±a ma√±ana.", answer: "para", hint: "Destination - heading to" },
            { sentence: "Pagu√© 20 euros ___ la entrada.", answer: "por", hint: "Exchange - trading money for ticket" },
            { sentence: "Estudia ___ ser m√©dico.", answer: "para", hint: "Purpose/goal - in order to" },
            { sentence: "Trabajo ___ Google.", answer: "para", hint: "Employment - working for" },
            { sentence: "Llegu√© tarde ___ el tr√°fico.", answer: "por", hint: "Cause/reason - because of" },
            { sentence: "Necesito el dinero ___ el viernes.", answer: "para", hint: "Deadline - by when" },
            { sentence: "Te llamo ___ tel√©fono.", answer: "por", hint: "Means/method - by phone" },
            { sentence: "___ m√≠, la comida es muy buena.", answer: "para", hint: "Opinion - in my view" },
            { sentence: "Viv√≠ en Chile ___ dos a√±os.", answer: "por", hint: "Duration - for how long" },
        ];

        let currentQuestion = 0;
        let score = 0;
        let answered = 0;
        const quizContainer = document.getElementById('quizContainer');

        function renderQuiz() {
            if (currentQuestion >= quizQuestions.length) {
                quizContainer.innerHTML = `
                    <div class="quiz-card" style="text-align: center;">
                        <div style="font-size: 3rem; margin-bottom: 16px;">üéâ</div>
                        <div class="quiz-question">Quiz Complete!</div>
                        <div style="font-size: 1.5rem; font-weight: 700; color: var(--success); margin: 16px 0;">
                            ${score}/${quizQuestions.length}
                        </div>
                        <button class="cta-btn" onclick="resetQuiz()" style="margin-top: 16px;">Try Again</button>
                    </div>
                `;
                updateProgress(100);
                return;
            }

            const q = quizQuestions[currentQuestion];
            quizContainer.innerHTML = `
                <div class="quiz-card">
                    <div class="quiz-question">Fill in the blank:</div>
                    <div class="quiz-sentence">${q.sentence.replace('___', '<span class="blank">?</span>')}</div>
                    <div class="quiz-options">
                        <button class="quiz-btn por" onclick="checkAnswer('por', this)">por</button>
                        <button class="quiz-btn para" onclick="checkAnswer('para', this)">para</button>
                    </div>
                    <div class="quiz-feedback" id="feedback"></div>
                </div>
            `;
            updateProgress((currentQuestion / quizQuestions.length) * 100);
        }

        function checkAnswer(answer, btn) {
            const q = quizQuestions[currentQuestion];
            const feedback = document.getElementById('feedback');
            const buttons = document.querySelectorAll('.quiz-btn');

            buttons.forEach(b => b.disabled = true);

            if (answer === q.answer) {
                btn.classList.add('correct');
                feedback.className = 'quiz-feedback show correct';
                feedback.innerHTML = `‚úì Correct! ${q.hint}`;
                score++;
                if (typeof YespanolUI !== 'undefined') YespanolUI.haptic('success');
            } else {
                btn.classList.add('incorrect');
                document.querySelector(`.quiz-btn.${q.answer}`).classList.add('correct');
                feedback.className = 'quiz-feedback show incorrect';
                feedback.innerHTML = `‚úó The answer is ${q.answer.toUpperCase()}. ${q.hint}`;
                if (typeof YespanolUI !== 'undefined') YespanolUI.haptic('error');
            }

            answered++;
            updateScore();

            if (typeof Yespanol !== 'undefined') {
                Yespanol.recordAttempt(`por-para-${currentQuestion}`, 'por-para', answer === q.answer);
            }

            setTimeout(() => {
                currentQuestion++;
                renderQuiz();
            }, 1500);
        }

        function updateScore() {
            document.getElementById('scoreValue').textContent = `${score}/${answered}`;
        }

        function updateProgress(percent) {
            document.getElementById('progressFill').style.width = percent + '%';
        }

        function resetQuiz() {
            currentQuestion = 0;
            score = 0;
            answered = 0;
            updateScore();
            renderQuiz();
        }

        function goToFlashcards() {
            if (typeof YespanolUI !== 'undefined') {
                YespanolUI.pageTransition('../practice/flashcards.html?category=por-para');
            } else {
                location.href = '../practice/flashcards.html?category=por-para';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderQuiz();
        });
    </script>
</body>
</html>
